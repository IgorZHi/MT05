 # MPA, SPA, PWA

 На сегодняшний день большинство сайтов построены по трём основным шаблонам:
  как многостраничные приложения (multi-page application или MPA), 
  как одностраничные приложения (single-page application или SPA)  
  как прогрессивные (progressive web application или PWA).

   ### SPA — 
   это одностраничное приложение, содержащее HTML-страницу, которая динамически (без полной перезагрузки) обновляется в ответ на действия пользователя. Архитектура приложения устроена так, что при первоначальном запуске посетитель видит основной контент сайта в браузере, а новые данные загружаются на ходу по мере необходимости, например, при прокрутке или клике на иконку.

   #### Преимущества SPA

В вопросе скорости подгрузки у SPA сайтов нет равных, что и является их главным преимуществом. Так как львиная доля ресурсов загружается в одну сессию, при дальнейших действиях SPA быстро обновляет необходимую часть данных, значительно экономя время.

***Высокая скорость*** — не единственный плюс SPA приложения. Помимо этого одностраничные приложения имеют следующие преимущества:

***Лёгкость создания***. Для разработки SPA приложения уже готовы библиотеки и фреймворки, работа над frontend и backend может вестись параллельно. Кроме того, на основе готового кода в дальнейшем можно построить мобильное приложение;

***Гибкость пользовательского интерфейса***. Для одной страницы проще разработать увлекательный и интерактивный дизайн интерфейса; 
простое кэширование данных. Важные данные загружаются в один запрос, а далее пользователь одностраничного приложения может работать частично оффлайн, подключаясь к интернету, чтобы сохранить прогресс.
#### Недостатки SPA
Некоторые пользователи отключают JavaScript в браузерах, чтобы ускорить загрузку сайта и избавиться от нежелательной рекламы. У таких пользователей приложение просто не заработает. Кроме того, существует проблема утечки памяти JavaScript, которая уменьшает скорость загрузки и открывает ваши данные для действий злоумышленников.
Кроме того, одностраничные приложения:
***Плохо поддаются SEO оптимизации***. URL страниц практически не меняется, а данные подгружаются динамически, когда для оптимизации важна устойчивость и уникальные URL для каждой страницы. Поисковым ботам сложно просканировать SPA приложение, и на данный момент грамотно индексировать такие сайты умеет только Google;
***Сильно нагружают браузер***. Такая проблема возникает из-за относительно “тяжёлых” клиентских фреймворков;
могут недёшево стоить.
Разумеется ***итоговая стоимость*** разработки разнится, но цена сложных сайтов довольно высока.

***Примерами SPA*** являются соцсети и сайты с большим количеством пользователей:
 Facebook(https://www.facebook.com), Twitter(https://twitter.com) или Вконтакте(https://vk.com/)


### MPA - 
это многостраничные приложения, работающие, как привычные нам веб-сайты. Они отправляют запрос на сервер и полностью обновляют страницу, когда с ней совершается какое-либо действие (переход на другую страницу, внесение и изменение данных). Подобная архитектура приложения значительно влияет на скорость и производительность, поскольку большая часть данных подгружается повторно при каждом переходе.
В целом, MPA представляет собой главную страницу и множество ссылок на другие страницы.  

#### Преимущества MPA

***Простая SEO-оптимизация***. MPA часто используют сайты, для которых важно попадать в топы поисковых систем. Каждая из страниц имеет уникальный URL и стабильна, что позволяет поисковым ботам адекватно ее просканировать.
***Масштабируемость***. В MPA приложение можно вложить столько информации, сколько потребуется, без ограничений по страницам и функциям.
***Проверенная классика***. MPA работают по тем же принципам, что и знакомые пользователю веб-сайты с классической навигацией.

#### Недостатки MPA

***Низкая скорость разработки***. MPA приложения требуют использования фреймворков на обеих сторонах: клиента и сервера. Также из-за тесной взаимосвязи frontend и backend усложняется работа разработчиков. Всё это в совокупности увеличивает бюджет и сроки разработки.
***Затраты на создание мобильного приложения***. MPA приложения плохо конвертируются в мобильные. Для этого в значительной части случаев потребуется разработка backend с нуля.

***Примерами MPA*** являются  e-commerce сайты вроде Ebay(https://www.ebay.com/), Ozon(https://www.ozon.ru/) и Amazon(https://www.amazon.com), где необходимо отображать большое количество контента.

В целом, MPA представляет собой главную страницу и множество ссылок на другие страницы. MPA подходит крупным компаниям, предлагающим широкий спектр услуг и продуктов: интернет-магазины, сайты компаний, каталоги и торговые площадки.  

### PWA (Progressive Web Application) -
 это технология в веб-разработке, которая визуально и функционально трансформирует сайт в веб-приложение. PWA объединяют плюсы веб и мобильной разработки.Чтобы начать работу с PWA, пользователю необходимо скачать и установить сайт как приложение. Последующий доступ к сайту производится через иконку на рабочем столе пользователя. При нажатии сайт быстро открывается без посредника в виде браузера.

 #### Преимущества PWA

 ***Сокращение расходов на разработку***
PWA работает на всех платформах и устройствах, что избавляет от необходимости создавать версии продукта под каждую операционную систему. 

***Взаимодействие с целевой аудиторией***
Прогрессивные веб-приложения помогают бизнесу охватить аудиторию на различных каналах коммуникации с минимальными вложениями.

***Низкий процент отказов***
Для загрузки обычного мобильного приложения пользователю нужно пройти 4-6 шагов, и на каждом из них отваливается до 20% аудитории. Тогда как установка PWA предлагается пользователю при повторном заходе на сайт. Основные компоненты приложения уже загружены заранее, во время первого использования приложения. Это существенно ускоряет инсталляцию и снижает количество отказов.

***Гибкость***
Используя PWA, вам не придется думать, какую операционную систему выбрать. PWA приложения одинаково хороши для разных устройств, экранов и браузеров.

***Производительность***
Благодаря эффективному кэшированию данных, PWA работают быстрее мобильных приложений.

***Лёгкость***
PWA занимают гораздо меньше места по сравнению с нативными приложениями. Например, внедрив технологию PWA на свой веб-сайт, Pinterest сократила размер своего приложения с 9,6 Мбайт для Android и 56 Мбайт для iOS до 150 Кбайт.

***Доступ к функциям устройства***
Как мы уже говорили ранее, PWA могут получить доступ к таким возможностям устройства, как камера, Bluetooth или местоположение GPS. Для владельцев сайтов электронной коммерции может быть полезно, чтобы PWA могли отправлять push-уведомления.

***Отсутствие ограничений сторов***
PWA не подконтрольны магазинам приложений и обязаны соответствовать их требованиям в отличие от мобильных версий приложений.

***Хорошо для SEO***
Быстрая загрузка играет большую роль в позиции веб-сайта в мобильной поисковой системе Google. PWA индексируется Google и другими поисковыми системами, хотя работает очень похоже на собственное приложение. Это абсолютный плюс для SEO.

#### Недостатки PWA 
PWA — отличная альтернатива нативным приложениям, однако эти приложения также имеют и недостатки.

***Отсутствие трафика из App Store и Google Play***
Большое количество пользователей привыкли искать и скачивать приложения из магазинов приложений. Поэтому при отсутствии нативного приложения трафик из App Store и Google Play упускается.

***Ограниченная поддержка функций устройства ***
Некоторые функции мобильного устройства недоступны с использованием текущих возможностей веб-браузера. Особенно это касается поддержки функций PWA iOS, таких как Face ID, Touch ID, ARKit, Bluetooth и информации о заряде батареи. Следовательно, совместимость PWA на iOS может быть ограниченной и глючной.

***Более высокое использование батареи***
PWA, написанные на JavaScript, расходуют больше заряда батареи, чем приложения, написанные на нативных языках таких как Kotlin или Swift.

***Примеры PWA приложений*** - Forbes(https://www.forbes.ru), - Lancôme (https://lancome.com),- Aliexpress  (https://www.aliexpress.com).


|         SPA                  |        MPA                   |         PWA              |
|:----------------------------:|:----------------------------:|:------------------------:|
| Простая разработка            |   Низкая скорость разработки |  Скорость разработки    |
| Гибкий интерфейс              | Традиционный интерфейс       |Гибкий интерфейс         |
| Простое кэширование данных    | Высокая маштабируемость     |Кросплатформенность |                         
|Сложность в SEO отимизации     | Простая SEO оптимизация      |     Сложность в SEO     |
|Сильная нагрузка на браузер    | Средняя нагрузка на браузер  |    Слабая нагрузка      |
| Цена зависит от сложности сайта| Высокая стоимость разработки| От сложности            |



### Зачем вообще нужны PWA? Почему нельзя ограничиться SPA или MPA?

Когда нужно мобильное приложение для максимально широкой аудитории, но разработка, поддержка, модернизация двух нативных платформ iOS и Android слишком дорога.
Контент на сайте вашей компании постоянно обновляется. Меняются цены, постоянно проходят аукционы, есть биржевые сводки, новости и т.п.
К сайту прикручен чат или платформа комментариев. И пользователям важно получать уведомления о новых сообщениях.
Юзерам удобно сначала извлекать информацию, а потом загружать её в автономном режиме, по аналогии с новостными приложениями или блогом, который публикует несколько статей в день.
***Повысить производительность сайта***. Высокая скорость загрузки приложения снижает показатель отказов (долю пользователей, покидающих сайт до его загрузки). Для мобильных пользователей каждая секунда на счету, и успешная борьба за внимание клиентов имеет решающее значение. Быстрая загрузка приложения помогают увеличить конверсию, что позволяет повысить прибыль интернет-магазина.
***Обеспечить опыт пользования нативным приложением***. Поскольку страницу не нужно загружать полностью, можно менять только некоторые блоки на странице, анимировать изменения. Это приближает PWA-сайты к опыту пользования нативным приложением - ***Работа без интернета , установка на устройство , возможность работать в фоновом режиме , пуш уведомления.***



### Какие технологии используются для реализации PWA?

- ***Интерфейс веб-API*** 
- ***Манифест веб приложения*** -  это файл конфигурации, который содержит сведения о приложении и определяет его поведение после установки. Он содержит значки, имя, режим отображения и т. Д. В случае PWA мы можем наслаждаться взаимодействием с приложением, не отвлекаясь, например, на пользовательский интерфейс браузера
- ***Service Worker*** - это файл JavaScript, который определяет логику запросов и стратегию кэширования, что позволяет использовать приложение даже при нестабильном подключении к Интернету или в автономном режиме. Он запускается как фоновый процесс, отдельный от браузера, и может выполнять фоновые задачи.
- ***Оболочка приложения (App Shell)*** — это минимальный набор локальных ресурсов (HTML, CSS, JavaScript), необходимых для загрузки каркаса пользовательского интерфейса. Оболочка приложения кэшируется сервис-воркером и позволяет быстрее загружать веб-страницы.
- ***Пуш уведомления***


### Как можно понять (и можно ли), что перед нами PWA, а не другие виды приложений?

- Уведомления о новых сообщениях
- Поддержка HTTPS 
- Наличие манифеста в приложении
- Работа в офф лайн режиме
- Возможность добавления на главный экран устройства


### Чем отличается между собой тестирование SPA и MPA?
 Как и для всех сайтов MPA , при тестировании SPA проверяются:

Адаптивность

Кроссбраузерность

Мультиязычность, при ее наличии

Загрузка при различных скоростях соединения

Так как SPA состоит из одной страницы и все взаимодействия происходят через запросы на обновление конкретных данных, то при ручном тестировании проверяется всё, что может обновляться.
Тестирование первоначальной загрузки.
Тестирование функционала.
Тестирование ошибочных запросов.
Отличительная особенность таких сайтов — переложение логики работы сайта на сторону клиента.

### Как тестировать PWA?
При тестировании прогрессивного веб-приложения необходимо проверить следующие моменты:

***Сайт обслуживается по HTTPS***: Безопасность является одной из основных проблем в прогрессивном веб-приложении, поэтому вам необходимо убедиться, что ваше веб-приложение обслуживается по HTTPS.
Как проверить? Вы можете использовать Lighthouse от Google Developers, jitbit, seositecheckup, digicert, ssl shopper, ssl labs и т.д., чтобы проверить, обслуживается ли ваш сайт по HTTPS или нет.

***Веб-страницы отзывчивы***: Убедитесь, что ваше веб-приложение демонстрирует отзывчивое поведение на всех мобильных и настольных устройствах.
Как проверить? Вы можете использовать функцию отзывчивости LambdaTest для проверки отзывчивости вашего веб-приложения.

***Автономная загрузка***: Все ваши веб-страницы или хотя бы некоторые из них должны работать, даже когда ваше приложение находится в автономном режиме. Вам необходимо убедиться, что ваше веб-приложение отвечает сообщением 200, когда оно находится в автономном режиме.
Как проверить? Опять же, поскольку Google активно продвигает экосистему PWA, у них есть одни из лучших инструментов для тестирования PWA-приложений. Например, Lighthouse. Альтернативой является Wiremock.

***Кросс-браузерная совместимость***: Вам необходимо протестировать ваше веб-приложение на кросс-браузерную совместимость, чтобы убедиться, что ваше веб-приложение обеспечивает удобство работы во всех браузерах.
Как протестировать? Вы можете использовать LambdaTest для тестирования кросс-браузерной совместимости.

***Метаданные для "Add to Homescreen***": Вам необходимо проверить, предоставляет ли веб-приложение метаданные для ‘Add to Homescreen’.
Как проверить? Вы можете использовать Lighthouse для проверки метаданных для ‘Add to Homescreen’.

***Производительность** - Переходы между страницами должны быть плавными и не должны вызывать ощущения, что они блокируют сеть: Переходы являются ключевым фактором для восприятия производительности, поэтому они не должны быть плавными при перемещении, даже при медленном интернет-соединении.
Как проверить? Это следует делать вручную в медленной сети. Когда вы нажимаете на любую кнопку или ссылку, она должна немедленно реагировать либо немедленным переходом на экран гнезда и в ожидании показывать экран загрузки, либо индикатором загрузки, пока приложение не дождется ответа.

***Каждая страница должна иметь URL***: Каждая страница вашего веб-приложения должна иметь URL, и все URL должны быть уникальными.
Как проверить? Проверьте, что на каждую страницу можно перейти по URL, и он должен быть уникальным, чтобы им можно было поделиться в социальных сетях или на других платформах. URL также можно открывать непосредственно в новых браузерах.

***Возможность совместного использования***: - Контентом должно быть легко поделиться даже в полноэкранном режиме, и он должен формировать карточки для всех платформ социальных сетей.
Как протестировать? Протестируйте вручную, поделившись контентом в полноэкранном режиме. Тест для карточек может быть выполнен следующим образом:

Facebook: Отладьте URL, введя пост, которым нужно поделиться, и проверьте, были ли сформированы карточки или нет.

Twitter: Проверьте, добавлен ли тип карточки для вашего контента в HEAD страницы HTML:

***Наличие метаданных***-  Schema.org везде, где это необходимо: Ваш веб-приложение должно уметь создавать богатые карточки, если это необходимо. Это помогает улучшить отображение вашего сайта различными поисковыми системами.
Как проверить? Вы можете использовать структурированные данные Google, чтобы убедиться в наличии или отсутствии изображений, описаний, заголовков и т.д.

***Push-уведомления***:- Если push-уведомления применимы для вашего веб-приложения, они не должны быть слишком агрессивными.
Как протестировать? Протестируйте поток отказа от push-уведомлений. Должна быть четкая инструкция, указывающая, для чего сайт хочет получить разрешение и почему пользователь должен включить push-уведомления.

Как LambdaTest может помочь в тестировании прогрессивного веб-приложения?
Как я уже говорил, прогрессивные веб-приложения должны быть отзывчивыми, совместимыми с браузерами и добавляться на домашний экран. Как вы можете убедиться, что ваше веб-приложение соответствует этим критериям или нет?

На помощь вам придут рабочие столы, эмуляторы и симуляторы реального времени LambdaTest, с помощью которых вы сможете проверить, соответствует ли разработанное вами веб-приложение этим критериям. Следующий вопрос — как? Ну, LambdaTest предоставляет вам более 3000+ мобильных и настольных компьютеров, на которых вы можете проверить это.

***Добавление на рабочий стол или добавление на домашний экран*** -  можно проверить, показывает ли мое веб-приложение при добавлении ожидаемое поведение или нет для данного мобильного или рабочего стола?

Проявляет ли мое веб-приложение отзывчивое поведение для каждого мобильного или настольного компьютера?

Совместимо ли веб-приложение со всеми доступными браузерами и версиями браузеров?

Глобально стратегия тестирования PWA имеет 2 направления деятельности:

Стандартное тестирование веб-приложений
Функциональное тестирование
Нефункциональное тестирование (тестирование пользовательского интерфейса, кроссбраузерное тестирование, тестирование производительности)
***Тестирование функций PWA***

Установка на домашний экран
Автономный режим
Всплывающее уведомление

***Элементы нефункционального тестирования*** -  Отзывчивость, кросс-браузерная совместимость и производительность — это основы PWA, которые необходимо протестировать.
Приложение должно адаптироваться к различным устройствам и размерам экрана, чтобы правильно отображать пользовательский интерфейс и контент.
Вы должны протестировать пользовательский интерфейс и функциональность в основных браузерах. Каждый браузер имеет свой собственный движок, который отображает страницу, плюс есть ограничения в поддержке PWA.
***Быстрый запуск, плавная прокрутка и мгновенные переходы между страницами*** — все это части PWA, которые напрямую влияют на производительность.

PWA — это веб-сайт, и мы можем использовать стандартные веб-инструменты для тестирования, например, Chrome DevTools для настольного браузера, Postman, Charles Proxy Server и т. д.
Кодовая база веб-сайта одинакова и актуальна для всех платформ.